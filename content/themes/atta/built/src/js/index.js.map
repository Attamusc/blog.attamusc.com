{"version":3,"file":"src/js/index.js","sources":["src/js/index.js"],"names":[],"mappings":"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","sourcesContent":["require.config({\n  baseUrl: '/assets/js/',\n\n  paths: {\n    'jquery': 'vendor/jquery'\n  },\n\n  shim: {\n    'vendor/history': {\n      deps: ['jquery'],\n      exports: 'History'\n    },\n    'vendor/nprogress': {\n      deps: ['jquery'],\n      exports: 'NProgress'\n    }\n  }\n});\n\ndefine(function(require) {\n  var $ = require('jquery'),\n      History = require('vendor/history'),\n      NProgress = require('vendor/nprogress');\n\n  /* ============================================================ */\n  /* Scroll To Top */\n  /* ============================================================ */\n\n  $('.js-jump-top').on('click', function(e) {\n    $('html, body').animate({'scrollTop': 0});\n    return false;\n  });\n\n  /* ============================================================ */\n  /* Ajax Loading */\n  /* ============================================================ */\n\n  var loading = false,\n      showIndex = false,\n      $ajaxContainer = $('#ajax-container'),\n      $latestPost = $('#latest-post'),\n      $postIndex = $('#post-index');\n\n  // Initially hide the index and show the latest post\n  $latestPost.show();\n  $postIndex.hide();\n\n  // Show the index if the url has \"page\" in it (a simple\n  // way of checking if we're on a paginated page.)\n  if (window.location.pathname.indexOf('page') === 1) {\n    $latestPost.hide();\n    $postIndex.show();\n  }\n\n  // Check if history is enabled for the browser\n  if ( ! History.enabled) {\n    return false;\n  }\n\n  History.Adapter.bind(window, 'statechange', function() {\n    var State = History.getState();\n\n    // Get the requested url and replace the current content\n    // with the loaded content\n    $.get(State.url, function(result) {\n      var $html = $(result);\n      var $newContent = $('#ajax-container', $html).contents();\n\n      $('html, body').animate({'scrollTop': 0});\n\n      $ajaxContainer.fadeOut(500, function() {\n        $latestPost = $newContent.filter('#latest-post');\n        $postIndex = $newContent.filter('#post-index');\n\n        if (showIndex === true) {\n          $latestPost.hide();\n        } else {\n          $latestPost.show();\n          $postIndex.hide();\n        }\n\n        $ajaxContainer.html($newContent);\n        $ajaxContainer.fadeIn(500);\n\n        NProgress.done();\n\n        loading = false;\n        showIndex = false;\n      });\n    });\n  });\n\n  $('body').on('click', '.js-ajax-link, .pagination a', function(e) {\n    e.preventDefault();\n\n    if (loading === false) {\n      var currentState = History.getState();\n      var url = $(this).attr('href');\n      var title = $(this).attr('title') || null;\n\n      // If the requested url is not the current states url push\n      // the new state and make the ajax call.\n      if (url !== currentState.url.replace(/\\/$/, \"\")) {\n        loading = true;\n\n        // Check if we need to show the post index after we've\n        // loaded the new content\n        if ($(this).hasClass('js-show-index') || $(this).parent('.pagination').length > 0) {\n          showIndex = true;\n        }\n\n        NProgress.start();\n\n        History.pushState({}, title, url);\n      } else {\n        // Swap in the latest post or post index as needed\n        if ($(this).hasClass('js-show-index')) {\n          $('html, body').animate({'scrollTop': 0});\n\n          NProgress.start();\n\n          $latestPost.fadeOut(300, function() {\n            $postIndex.fadeIn(300);\n            NProgress.done();\n          });\n        } else {\n          $('html, body').animate({'scrollTop': 0});\n\n          NProgress.start();\n\n          $postIndex.fadeOut(300, function() {\n            $latestPost.fadeIn(300);\n            NProgress.done();\n          });\n        }\n      }\n    }\n  });\n});\n"]}